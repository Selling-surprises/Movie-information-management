<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>影视电影资料管理系统</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="css/all.min.css">
    <!-- 改为CDN引用Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            transition: background 0.5s, color 0.5s;
        }
        
        .light-theme {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%);
            color: #333;
        }
        
        .light-theme header {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(108, 122, 137, 0.2);
        }
        
        .light-theme .upload-section,
        .light-theme .table-container,
        .light-theme .detail-section,
        .light-theme footer,
        .light-theme .stat-item,
        .light-theme .edit-form,
        .light-theme .confirmation-dialog .dialog-content,
        .light-theme .file-info {
            background: rgba(255, 255, 255, 0.85);
            border: 1px solid rgba(108, 122, 137, 0.2);
            color: #333;
        }
        
        .light-theme .upload-area {
            background: rgba(245, 247, 250, 0.7);
            border: 2px dashed #4361ee;
        }
        
        .light-theme .upload-area:hover {
            background: rgba(230, 233, 238, 0.8);
        }
        
        .light-theme .upload-area h3 {
            color: #4361ee;
        }
        
        .light-theme .data-table th {
            background: rgba(76, 201, 240, 0.1);
            color: #2c3e50;
        }
        
        .light-theme .data-table td {
            background: rgba(255, 255, 255, 0.6);
            color: #333;
        }
        
        .light-theme .search-box input {
            background: rgba(255, 255, 255, 0.8);
            color: #333;
            border: 1px solid #bdc3c7;
        }
        
        .light-theme .filter-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid #bdc3c7;
            color: #2c3e50;
        }
        
        .light-theme .filter-btn:hover, 
        .light-theme .filter-btn.active {
            background: #4cc9f0;
            color: #fff;
        }
        
        .light-theme .detail-info p {
            color: #555;
        }
        
        .light-theme .detail-info span {
            color: #222;
            font-weight: 500;
        }
        
        .light-theme .stat-label {
            color: #444;
            font-weight: 500;
        }
        
        .light-theme .notification {
            background: rgba(46, 204, 113, 0.95);
            color: white;
        }
        
        .light-theme .theme-toggle {
            background: #f5f7fa;
            color: #4cc9f0;
            border: 1px solid #4cc9f0;
        }
        
        .light-theme .theme-toggle:hover {
            background: #4cc9f0;
            color: white;
        }
        
        .light-theme .category-tag,
        .light-theme .type-tag {
            color: #fff !important;
            font-weight: 500;
        }
        
        .light-theme .empty-state h3 {
            color: #333;
        }
        
        .light-theme .empty-state p {
            color: #555;
        }
        
        .light-theme .file-info h4 {
            color: #4361ee;
        }
        
        .light-theme .file-info p {
            color: #555;
        }
        
        .light-theme .page-text {
            color: #555;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-top: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #4cc9f0, #4361ee, #9b59b6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(76, 201, 240, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0aec0;
            margin-bottom: 20px;
        }
        
        .main-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
            }
        }
        
        .upload-section {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex: 1;
            border: 1px solid rgba(76, 201, 240, 0.2);
            backdrop-filter: blur(5px);
        }
        
        .table-container {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex: 2;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            border: 1px solid rgba(76, 201, 240, 0.2);
            backdrop-filter: blur(5px);
        }
        
        .controls {
            padding: 20px;
            background: rgba(23, 25, 35, 0.8);
            border-bottom: 1px solid rgba(76, 201, 240, 0.2);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .light-theme .controls {
            background: rgba(255, 255, 255, 0.85);
        }
        
        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border-radius: 50px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-box input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.3);
            border-color: #4cc9f0;
        }
        
        .search-box i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #4cc9f0;
        }
        
        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            background: rgba(26, 32, 44, 0.8);
            border: 1px solid #2d3748;
            color: #a0aec0;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .filter-btn:hover, .filter-btn.active {
            background: #4cc9f0;
            color: #1a202c;
            border-color: #4cc9f0;
            box-shadow: 0 0 15px rgba(76, 201, 240, 0.4);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            overflow-y: auto;
            flex: 1;
            min-width: 1000px; /* 确保表格有最小宽度以支持横向滚动 */
        }
        
        .data-table th {
            background: rgba(76, 201, 240, 0.15);
            padding: 16px 15px;
            text-align: left;
            font-weight: 600;
            color: #4cc9f0;
            position: sticky;
            top: 0;
            backdrop-filter: blur(5px);
            border-bottom: 2px solid rgba(76, 201, 240, 0.2);
        }
        
        .data-table td {
            padding: 14px 15px;
            border-bottom: 1px solid rgba(76, 201, 240, 0.1);
            transition: all 0.2s ease;
            background: rgba(26, 32, 44, 0.3);
        }
        
        .data-table tr {
            transition: all 0.3s ease;
        }
        
        .data-table tr:hover {
            background: rgba(76, 201, 240, 0.1);
        }
        
        .data-table tr.selected-row {
            background: rgba(76, 201, 240, 0.25) !important;
            box-shadow: inset 0 0 0 2px #4cc9f0, 0 5px 15px rgba(76, 201, 240, 0.2);
            transform: scale(1.005);
            position: relative;
            z-index: 1;
        }
        
        .data-table tr.selected-row.type-18plus {
            background: rgba(231, 76, 60, 0.25) !important;
            box-shadow: inset 0 0 0 2px #e74c3c, 0 5px 15px rgba(231, 76, 60, 0.2);
        }
        
        .type-tag {
            padding: 4px 10px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
            margin: 2px;
        }
        
        .type-18plus {
            background: rgba(231, 76, 60, 0.15);
            color: #e74c3c;
        }
        
        .type-love {
            background: rgba(233, 30, 99, 0.15);
            color: #e91e63;
        }
        
        .type-action {
            background: rgba(244, 67, 54, 0.15);
            color: #f44336;
        }
        
        .type-comedy {
            background: rgba(255, 152, 0, 0.15);
            color: #ff9800;
        }
        
        .type-drama {
            background: rgba(156, 39, 176, 0.15);
            color: #9c27b0;
        }
        
        .type-sci-fi {
            background: rgba(63, 81, 181, 0.15);
            color: #3f51b5;
        }
        
        .type-horror {
            background: rgba(96, 125, 139, 0.15);
            color: #607d8b;
        }
        
        .type-fantasy {
            background: rgba(0, 188, 212, 0.15);
            color: #00bcd4;
        }
        
        .type-war {
            background: rgba(121, 85, 72, 0.15);
            color: #795548;
        }
        
        .type-documentary {
            background: rgba(96, 125, 139, 0.15);
            color: #607d8b;
        }
        
        .type-animation {
            background: rgba(0, 150, 136, 0.15);
            color: #009688;
        }
        
        .type-adventure {
            background: rgba(103, 58, 183, 0.15);
            color: #673ab7;
        }
        
        .type-suspense {
            background: rgba(33, 33, 33, 0.15);
            color: #212121;
        }
        
        .type-thriller {
            background: rgba(97, 97, 97, 0.15);
            color: #616161;
        }
        
        .type-disaster {
            background: rgba(183, 28, 28, 0.15);
            color: #b71c1c;
        }
        
        .type-other {
            background: rgba(158, 158, 158, 0.15);
            color: #9e9e9e;
        }
        
        .category-tag {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .category-movie {
            background: rgba(76, 175, 80, 0.15);
            color: #4caf50;
        }
        
        .category-tv {
            background: rgba(33, 150, 243, 0.15);
            color: #2196f3;
        }
        
        .category-variety {
            background: rgba(255, 193, 7, 0.15);
            color: #ffc107;
        }
        
        .thumbnail {
            width: 80px;
            height: 60px;
            border-radius: 5px;
            object-fit: cover;
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            text-align: center;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .thumbnail:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(76, 201, 240, 0.4);
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .detail-section {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            min-height: 300px;
            flex: 1;
            border: 1px solid rgba(76, 201, 240, 0.2);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        .detail-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .detail-img {
            width: 250px;
            height: 150px;
            border-radius: 10px;
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            flex-shrink: 0;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .detail-img:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .detail-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .detail-info h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #4cc9f0;
        }
        
        .detail-info p {
            margin-bottom: 8px;
            color: #a0aec0;
        }
        
        .detail-info span {
            color: #e2e8f0;
            font-weight: 500;
        }
        
        .upload-area {
            border: 2px dashed #4cc9f0;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 25px;
            background: rgba(26, 32, 44, 0.5);
        }
        
        .upload-area:hover {
            background: rgba(26, 32, 44, 0.7);
            border-color: #4361ee;
            box-shadow: 0 0 20px rgba(76, 201, 240, 0.3);
        }
        
        .upload-area i {
            font-size: 3.5rem;
            color: #4cc9f0;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover i {
            color: #4361ee;
            transform: scale(1.1);
        }
        
        .upload-area h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #4cc9f0;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover h3 {
            color: #4361ee;
        }
        
        .upload-area p {
            color: #a0aec0;
            margin-bottom: 20px;
        }
        
        .upload-btn {
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(76, 201, 240, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 201, 240, 0.4);
            background: linear-gradient(45deg, #4361ee, #4cc9f0);
        }
        
        .upload-btn:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(45deg);
            transition: all 0.5s;
            z-index: 1;
        }
        
        .upload-btn:hover:after {
            transform: rotate(45deg) translate(100%, 0);
        }
        
        .file-info {
            background: rgba(26, 32, 44, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .file-info h4 {
            color: #4cc9f0;
            margin-bottom: 10px;
        }
        
        .file-info p {
            color: #a0aec0;
            line-height: 1.6;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #a0aec0;
            font-size: 0.9rem;
            border-top: 1px solid rgba(76, 201, 240, 0.2);
            margin-top: 30px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }
        
        .stats {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(30, 41, 59, 0.7);
            padding: 15px 25px;
            border-radius: 10px;
            min-width: 150px;
            border: 1px solid rgba(76, 201, 240, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(76, 201, 240, 0.2);
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4cc9f0;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a0aec0;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            padding: 20px;
            background: rgba(23, 25, 35, 0.8);
            gap: 10px;
            position: sticky;
            bottom: 0;
            align-items: center;
        }
        
        .light-theme .pagination {
            background: rgba(255, 255, 255, 0.85);
        }
        
        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid #2d3748;
            color: #a0aec0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-btn:hover, .page-btn.active {
            background: #4cc9f0;
            color: #1a202c;
            border-color: #4cc9f0;
            box-shadow: 0 0 10px rgba(76, 201, 240, 0.4);
        }
        
        .page-input {
            width: 50px;
            height: 40px;
            padding: 5px;
            text-align: center;
            border-radius: 5px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
            font-size: 1rem;
        }
        
        .page-input:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.3);
        }
        
        .page-text {
            margin: 0 10px;
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .detail-header {
                flex-direction: column;
                text-align: center;
            }
            
            .pagination {
                flex-wrap: wrap;
            }
            
            .filter-buttons {
                justify-content: center;
            }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            background: rgba(46, 204, 113, 0.9);
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateX(120%);
            transition: transform 0.4s ease;
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: rgba(231, 76, 60, 0.9);
        }
        
        .notification.warning {
            background: rgba(241, 196, 15, 0.9);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #a0aec0;
        }
        
        .empty-state i {
            font-size: 5rem;
            margin-bottom: 20px;
            color: #4cc9f0;
            opacity: 0.6;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #e2e8f0;
        }
        
        .empty-state p {
            max-width: 500px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }
        
        /* 编辑模式样式 */
        .edit-mode {
            background: rgba(76, 201, 240, 0.05);
        }
        
        .edit-form {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            padding: 10px;
            background: rgba(26, 32, 44, 0.8);
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .edit-form input, .edit-form select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
        }
        
        .edit-form input:focus, .edit-form select:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.3);
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 150px;
        }
        
        .form-group label {
            font-size: 0.85rem;
            margin-bottom: 5px;
            color: #a0aec0;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            width: 100%;
            justify-content: flex-end;
        }
        
        .action-btn {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .save-btn {
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            color: white;
        }
        
        .cancel-btn {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
        
        .save-btn:hover {
            background: linear-gradient(45deg, #4361ee, #4cc9f0);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(76, 201, 240, 0.3);
        }
        
        .cancel-btn:hover {
            background: rgba(231, 76, 60, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.2);
        }
        
        /* 导出按钮样式 */
        .export-btn {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.2);
            margin-top: 15px;
            width: 100%;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .export-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(155, 89, 182, 0.3);
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
        }
        
        .export-btn:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(45deg);
            transition: all 0.5s;
        }
        
        .export-btn:hover:after {
            transform: rotate(45deg) translate(100%, 0);
        }
        
        /* 清空按钮样式 */
        .clear-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.2);
            margin-top: 15px;
            width: 100%;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .clear-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.3);
            background: linear-gradient(45deg, #c0392b, #e74c3c);
        }
        
        .clear-btn:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(45deg);
            transition: all 0.5s;
        }
        
        .clear-btn:hover:after {
            transform: rotate(45deg) translate(100%, 0);
        }
        
        /* 操作按钮优化 */
        .edit-btn, .delete-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            font-size: 14px;
        }
        
        .edit-btn {
            background: #3498db;
            margin-right: 8px;
        }
        
        .edit-btn:hover {
            background: #2980b9;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.4);
        }
        
        .delete-btn {
            background: #e74c3c;
        }
        
        .delete-btn:hover {
            background: #c0392b;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.4);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        /* 导出进度 */
        .export-progress {
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
            display: none;
        }
        
        .export-progress-bar {
            height: 100%;
            background: white;
            width: 0%;
            transition: width 0.3s;
        }
        
        .exporting .export-progress {
            display: block;
        }
        
        .exporting .export-btn {
            pointer-events: none;
            opacity: 0.8;
        }
        
        /* 确认对话框 */
        .confirmation-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .confirmation-dialog.show {
            opacity: 1;
            visibility: visible;
        }
        
        .dialog-content {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            transition: transform 0.3s;
            border: 1px solid rgba(76, 201, 240, 0.3);
        }
        
        .confirmation-dialog.show .dialog-content {
            transform: translateY(0);
        }
        
        .dialog-header {
            margin-bottom: 20px;
        }
        
        .dialog-header h3 {
            font-size: 1.5rem;
            color: #e74c3c;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .dialog-body {
            margin-bottom: 25px;
            line-height: 1.6;
            color: #a0aec0;
        }
        
        .dialog-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        .dialog-btn {
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            border: none;
        }
        
        .dialog-cancel {
            background: rgba(44, 82, 130, 0.3);
            color: #a0aec0;
            border: 1px solid #2d3748;
        }
        
        .dialog-confirm {
            background: #e74c3c;
            color: white;
        }
        
        .dialog-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .dialog-cancel:hover {
            background: rgba(44, 82, 130, 0.5);
        }
        
        .dialog-confirm:hover {
            background: #c0392b;
        }
        
        /* 新添加的选中状态指示器 */
        .selected-indicator {
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: #4cc9f0;
            border-radius: 50%;
            opacity: 0;
            transition: all 0.3s;
        }
        
        .selected-row .selected-indicator {
            opacity: 1;
            width: 12px;
            height: 12px;
        }
        
        .selected-row.type-18plus .selected-indicator {
            background: #e74c3c;
        }
        
        /* 添加炫酷的动画 */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 201, 240, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(76, 201, 240, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 201, 240, 0); }
        }
        
        .selected-row {
            animation: pulse 1.5s ease-in-out;
        }
        
        /* 主题切换按钮 */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(26, 32, 44, 0.8);
            border: 1px solid #4cc9f0;
            color: #4cc9f0;
            padding: 8px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }
        
        .theme-toggle:hover {
            background: #4cc9f0;
            color: white;
            box-shadow: 0 0 10px rgba(76, 201, 240, 0.4);
        }
        
        /* 筛选组样式 */
        .filter-group {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .filter-group-title {
            color: #4cc9f0;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        /* 加载动画 */
        .loader {
            display: flex;
            justify-content: center;
            padding: 20px;
            width: 100%;
        }
        
        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(76, 201, 240, 0.3);
            border-radius: 50%;
            border-top: 4px solid #4cc9f0;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 主演筛选样式 */
        .star-search {
            flex: 1;
            min-width: 250px;
            position: relative;
        }
        
        .star-search input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border-radius: 50px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .star-search input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.3);
            border-color: #4cc9f0;
        }
        
        .star-search i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #9b59b6;
        }
        
        /* 新增的筛选按钮样式 */
        .filter-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            width: 100%;
        }
        
        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .filter-label {
            color: #4cc9f0;
            font-weight: 500;
            padding: 0 8px;
            white-space: nowrap;
        }
        
        /* 标签选择器样式 */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 5px;
        }
        
        .tag-checkbox {
            display: none;
        }
        
        .tag-label {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .tag-checkbox:checked + .tag-label {
            border: 1px solid currentColor;
            box-shadow: 0 0 8px currentColor;
            font-weight: bold;
        }
        
        /* 年份筛选器 */
        .year-filter {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .year-filter input {
            width: 100px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
        }
        
        .year-filter span {
            color: #a0aec0;
        }
        
        /* 标签选择器容器 */
        .tag-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        /* 新增样式：优化筛选控件对齐 */
        .filter-controls-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            width: 100%;
        }

        .filter-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .year-filter-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .year-filter-input {
            width: 100px;
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.8);
            color: #e2e8f0;
            height: 36px;
        }

        .tag-filters-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }
        
        /* 图片上传区域样式 */
        .image-upload-container {
            margin-top: 15px;
            padding: 15px;
            background: rgba(26, 32, 44, 0.3);
            border-radius: 10px;
            border: 1px dashed #4cc9f0;
        }
        
        .light-theme .image-upload-container {
            background: rgba(255, 255, 255, 0.3);
            border: 1px dashed #4361ee;
        }
        
        .image-upload-btn {
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .image-upload-btn:hover {
            background: linear-gradient(45deg, #4361ee, #4cc9f0);
            transform: translateY(-2px);
        }
        
        .image-preview {
            margin-top: 15px;
            text-align: center;
            display: none;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 150px;
            border-radius: 5px;
            border: 1px solid rgba(76, 201, 240, 0.3);
        }
        
        .remove-image-btn {
            margin-top: 10px;
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: 1px solid #e74c3c;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .remove-image-btn:hover {
            background: rgba(231, 76, 60, 0.2);
        }
        
        .upload-status {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #4cc9f0;
        }
        
        .light-theme .upload-status {
            color: #4361ee;
        }
        
        /* ========== 新增：移动端样式 ========== */
        /* 移动端下载提示样式 */
        .download-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            width: 90%;
            max-width: 400px;
            padding: 25px;
            border-radius: 15px;
            background: rgba(76, 201, 240, 0.95);
            color: white;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            gap: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: left;
            opacity: 0;
            visibility: hidden;
        }
        
        .download-notification.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            visibility: visible;
        }
        
        .download-notification i {
            font-size: 2.2rem;
            color: white;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.2);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .download-notification-content {
            flex: 1;
        }
        
        .download-notification-title {
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        
        .download-notification-message {
            font-size: 0.95rem;
            line-height: 1.5;
            opacity: 0.9;
        }
        
        .close-download-notification {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s;
            position: absolute;
            top: 15px;
            right: 15px;
        }
        
        .close-download-notification:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }
        
        .download-notification strong {
            font-weight: 700;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            margin: 0 2px;
        }
        
        /* 移动端优化样式 */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                padding-bottom: 80px; /* 为底部导航栏留出空间 */
            }
            
            .container {
                width: 100%;
            }
            
            header {
                padding: 20px 15px;
                margin-bottom: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
                padding-right: 10px;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            /* 移动端隐藏标题旁边的主题切换按钮 */
            .theme-toggle {
                display: none;
            }
            
            .main-content {
                flex-direction: column;
                gap: 15px;
            }
            
            /* 隐藏电脑端的上传区域 */
            .upload-section {
                display: none;
            }
            
            /* 移动端表格容器 - 添加横向滚动 */
            .table-container {
                max-height: 60vh;
                border-radius: 10px;
                margin-bottom: 15px;
                overflow-x: auto; /* 添加横向滚动 */
                overflow-y: auto;
            }
            
            /* 确保表格本身可以横向滚动 */
            .data-table {
                min-width: 800px; /* 确保表格有最小宽度以支持横向滚动 */
            }
            
            /* 移动端详情区域 */
            .detail-section {
                padding: 20px;
                min-height: auto;
                margin-bottom: 15px;
            }
            
            .detail-img {
                width: 100%;
                max-width: 250px;
                height: 120px;
                margin: 0 auto;
            }
            
            .detail-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .detail-info h2 {
                font-size: 1.5rem;
            }
            
            /* 移动端统计区域 */
            .stats {
                gap: 10px;
                margin-top: 10px;
            }
            
            .stat-item {
                min-width: calc(50% - 10px);
                padding: 12px 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            /* 移动端分页 - 确保显示并优化图标 */
            .pagination {
                display: flex !important; /* 强制显示 */
                padding: 10px;
                position: relative;
                background: rgba(23, 25, 35, 0.8);
                border-top: 1px solid rgba(76, 201, 240, 0.2);
                min-height: 60px;
            }
            
            .light-theme .pagination {
                background: rgba(255, 255, 255, 0.85);
            }
            
            .page-btn, .page-input {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .page-text {
                font-size: 0.8rem;
                margin: 0 5px;
                color: #a0aec0;
            }
            
            /* 确保分页按钮图标正确显示 */
            .page-btn i {
                font-family: "Font Awesome 6 Free" !important;
                font-weight: 900 !important;
                font-size: 14px !important;
                display: inline-block !important;
            }
            
            /* 移动端表格适配 */
            .data-table th, 
            .data-table td {
                padding: 10px 8px;
                font-size: 0.9rem;
            }
            
            .thumbnail {
                width: 60px;
                height: 45px;
            }
            
            .type-tag, .category-tag {
                font-size: 0.75rem;
                padding: 3px 8px;
            }
            
            .edit-btn, .delete-btn {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }
            
            /* 移动端编辑表单 */
            .edit-form {
                flex-direction: column;
                gap: 10px;
            }
            
            .form-group {
                min-width: 100%;
            }
            
            /* 移动端通知 */
            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: translateY(-150%);
            }
            
            .notification.show {
                transform: translateY(0);
            }
            
            /* 移动端下载提示样式调整 */
            .download-notification {
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.9);
                width: calc(100% - 40px);
                max-width: 350px;
                padding: 20px;
                border-radius: 12px;
                backdrop-filter: blur(20px);
            }
            
            .download-notification.show {
                transform: translate(-50%, -50%) scale(1);
            }
            
            .download-notification i {
                font-size: 1.8rem;
                width: 50px;
                height: 50px;
            }
            
            .download-notification-title {
                font-size: 1.1rem;
            }
            
            .download-notification-message {
                font-size: 0.9rem;
            }
            
            .close-download-notification {
                width: 35px;
                height: 35px;
                top: 10px;
                right: 10px;
            }
            
            /* 隐藏电脑端的筛选按钮和搜索框 */
            .controls {
                display: none;
            }
            
            /* 确保Font Awesome图标正确显示 */
            .fas, .fab, .far, .fal {
                font-family: "Font Awesome 6 Free" !important;
                font-weight: 900 !important;
            }
            
            .fab {
                font-family: "Font Awesome 6 Brands" !important;
            }
            
            /* 移动端操作按钮图标 */
            .edit-btn i, .delete-btn i, 
            .action-btn i, .image-upload-btn i,
            .remove-image-btn i {
                font-size: inherit !important;
            }
        }
        
        /* ========== 移动端右侧边栏 ========== */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            right: -320px;
            width: 300px;
            height: 100%;
            background: rgba(30, 41, 59, 0.97);
            backdrop-filter: blur(15px);
            z-index: 10000;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-left: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .light-theme .mobile-sidebar {
            background: rgba(255, 255, 255, 0.97);
            color: #333;
            border-left: 1px solid rgba(108, 122, 137, 0.2);
        }
        
        .mobile-sidebar.open {
            right: 0;
        }
        
        .sidebar-header {
            padding: 20px;
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .sidebar-header h3 {
            font-size: 1.3rem;
        }
        
        .close-sidebar {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .close-sidebar:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 0 80px 0;
        }
        
        .sidebar-section {
            padding: 20px;
            border-bottom: 1px solid rgba(76, 201, 240, 0.15);
        }
        
        .sidebar-section:last-child {
            border-bottom: none;
        }
        
        .sidebar-section h4 {
            margin-bottom: 15px;
            color: #4cc9f0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .sidebar-section h4 i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        /* 修复移动端搜索框图标位置问题 */
        .sidebar-search-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .sidebar-search {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border-radius: 25px;
            border: 1px solid #2d3748;
            background: rgba(26, 32, 44, 0.9);
            color: #e2e8f0;
            font-size: 1rem;
        }
        
        .light-theme .sidebar-search {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border-color: #bdc3c7;
        }
        
        .sidebar-search:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.3);
        }
        
        .sidebar-search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #4cc9f0;
            z-index: 2;
            font-size: 1rem;
        }
        
        .sidebar-filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .sidebar-filter-btn {
            padding: 10px 15px;
            background: rgba(26, 32, 44, 0.9);
            border: 1px solid #2d3748;
            border-radius: 8px;
            color: #a0aec0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            flex: 1;
            min-width: calc(50% - 8px);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .light-theme .sidebar-filter-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            border-color: #bdc3c7;
        }
        
        .sidebar-filter-btn.active {
            background: #4cc9f0;
            color: #1a202c;
            border-color: #4cc9f0;
            box-shadow: 0 3px 10px rgba(76, 201, 240, 0.3);
        }
        
        .sidebar-btn {
            width: 100%;
            padding: 14px 20px;
            margin-bottom: 12px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #4cc9f0, #4361ee);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            box-shadow: 0 4px 10px rgba(76, 201, 240, 0.2);
        }
        
        .sidebar-btn i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        .sidebar-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(76, 201, 240, 0.4);
        }
        
        .sidebar-btn:active {
            transform: translateY(-1px);
        }
        
        .sidebar-btn.theme {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
        }
        
        .sidebar-btn.upload {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }
        
        .sidebar-btn.export {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        
        .sidebar-btn.clear {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        .sidebar-btn-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .sidebar-btn-group .sidebar-btn {
            flex: 1;
            justify-content: center;
            text-align: center;
            padding: 12px 10px;
        }
        
        /* 移动端底部导航栏 */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(30, 41, 59, 0.98);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(76, 201, 240, 0.3);
            display: flex;
            z-index: 9999;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.15);
            height: 70px;
        }
        
        .light-theme .mobile-nav {
            background: rgba(255, 255, 255, 0.98);
            border-top: 1px solid rgba(108, 122, 137, 0.2);
        }
        
        .mobile-nav-btn {
            flex: 1;
            padding: 12px 5px;
            border: none;
            background: none;
            color: #a0aec0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.75rem;
            position: relative;
        }
        
        .light-theme .mobile-nav-btn {
            color: #6c757d;
        }
        
        .mobile-nav-btn.active {
            color: #4cc9f0;
        }
        
        .mobile-nav-btn.active:after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: #4cc9f0;
            border-radius: 0 0 3px 3px;
        }
        
        .mobile-nav-btn i {
            font-size: 1.4rem;
            transition: all 0.3s;
        }
        
        .mobile-nav-btn.active i {
            transform: scale(1.1);
        }
        
        /* 侧边栏遮罩 */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .sidebar-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        /* 电脑端隐藏移动端元素 */
        @media (min-width: 769px) {
            .mobile-sidebar,
            .mobile-nav,
            .sidebar-overlay {
                display: none;
            }
        }
        
        /* 修复分页按钮图标样式 */
        .page-btn i {
            font-family: "Font Awesome 6 Free" !important;
            font-weight: 900 !important;
            font-size: 14px !important;
            display: inline-block !important;
        }
        
        .page-btn {
            cursor: pointer !important;
        }

        .page-btn:hover, .page-btn.active {
            background: #4cc9f0 !important;
            color: #1a202c !important;
            border-color: #4cc9f0 !important;
            box-shadow: 0 0 10px rgba(76, 201, 240, 0.4) !important;
            cursor: pointer !important;
        }
    </style>
</head>
<body>
    <!-- 移动端下载提示 -->
    <div class="download-notification" id="downloadNotification">
        <i class="fas fa-download"></i>
        <div class="download-notification-content">
            <div class="download-notification-title">文件下载中</div>
            <div class="download-notification-message">
                文件已开始下载，默认保存到您的<strong>下载目录(Downloads)</strong>。如果下载未开始，请检查浏览器设置。
            </div>
        </div>
        <button class="close-download-notification" id="closeDownloadNotification">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- 移动端右侧边栏 -->
    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="sidebar-header">
            <h3>影视管理</h3>
            <button class="close-sidebar" id="closeSidebar">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- 搜索分组 -->
            <div class="sidebar-section">
                <h4><i class="fas fa-search"></i> 搜索</h4>
                
                <div class="sidebar-search-container">
                    <i class="fas fa-search sidebar-search-icon"></i>
                    <input type="text" class="sidebar-search" id="mobileSearchInput" placeholder="搜索影片名称...">
                </div>
                
                <div class="sidebar-search-container">
                    <i class="fas fa-user sidebar-search-icon"></i>
                    <input type="text" class="sidebar-search" id="mobileStarSearch" placeholder="搜索主演...">
                </div>
            </div>
            
            <!-- 筛选分组 -->
            <div class="sidebar-section">
                <h4><i class="fas fa-filter"></i> 筛选</h4>
                
                <div style="margin-bottom: 20px;">
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">分类筛选</p>
                    <div class="sidebar-filter-buttons">
                        <button class="sidebar-filter-btn active" data-category="all">全部</button>
                        <button class="sidebar-filter-btn" data-category="movie">电影</button>
                        <button class="sidebar-filter-btn" data-category="tv">电视剧</button>
                        <button class="sidebar-filter-btn" data-category="variety">综艺</button>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">类型标签</p>
                    <div class="sidebar-filter-buttons">
                        <button class="sidebar-filter-btn tag-filter active" data-tag="all">全部</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="动作">动作</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="喜剧">喜剧</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="爱情">爱情</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="科幻">科幻</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="恐怖">恐怖</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="剧情">剧情</button>
                        <button class="sidebar-filter-btn tag-filter" data-tag="18+">18+</button>
                    </div>
                </div>
                
                <div>
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">年份筛选</p>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="mobileYearFilter" class="sidebar-search" placeholder="输入年份" style="padding: 10px 15px; flex: 1;">
                        <button class="sidebar-filter-btn" id="mobileApplyYearFilter" style="padding: 10px 15px; min-width: auto;">应用</button>
                    </div>
                </div>
            </div>
            
            <!-- 操作分组 -->
            <div class="sidebar-section">
                <h4><i class="fas fa-cog"></i> 操作</h4>
                
                <div style="margin-bottom: 15px;">
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">数据管理</p>
                    <button class="sidebar-btn" id="mobileAddBtn">
                        <i class="fas fa-plus-circle"></i> 添加新影片
                    </button>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">主题设置</p>
                    <button class="sidebar-btn theme" id="mobileThemeBtn">
                        <i class="fas fa-moon"></i> 切换主题
                    </button>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <p style="margin-bottom: 10px; color: #4cc9f0; font-weight: 500;">数据导入/导出</p>
                    <button class="sidebar-btn upload" id="mobileUploadBtn">
                        <i class="fas fa-file-import"></i> 导入JSON数据
                    </button>
                    <input type="file" id="mobileFileInput" accept=".json" style="display: none;">
                    
                    <button class="sidebar-btn export" id="mobileExportBtn">
                        <i class="fas fa-file-export"></i> 导出JSON数据
                    </button>
                    
                    <button class="sidebar-btn clear" id="mobileClearBtn">
                        <i class="fas fa-trash-alt"></i> 清空所有数据
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 侧边栏遮罩 -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- 移动端底部导航 -->
    <div class="mobile-nav">
        <button class="mobile-nav-btn active" data-nav="home">
            <i class="fas fa-home"></i>
            <span>首页</span>
        </button>
        <button class="mobile-nav-btn" data-nav="list">
            <i class="fas fa-list"></i>
            <span>列表</span>
        </button>
        <button class="mobile-nav-btn" data-nav="details">
            <i class="fas fa-info-circle"></i>
            <span>详情</span>
        </button>
        <button class="mobile-nav-btn" data-nav="sidebar">
            <i class="fas fa-sliders-h"></i>
            <span>设置</span>
        </button>
    </div>
    
    <!-- 主内容区域 -->
    <div class="container">
        <header class="fade-in">
            <h1><i class="fas fa-video"></i> 影视电影资料管理系统</h1>
            <p class="subtitle">高效管理您的影视资料，支持JSON数据导入与导出</p>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i> 切换主题
            </button>
        </header>
        
        <div class="main-content">
            <div class="upload-section fade-in delay-1">
                <div class="upload-area" id="dropArea">
                    <i class="fas fa-file-import"></i>
                    <h3>上传JSON文件</h3>
                    <p>拖放文件到此处或点击上传</p>
                    <button class="upload-btn" id="uploadBtn">选择文件</button>
                    <input type="file" id="fileInput" accept=".json" style="display: none;">
                </div>
                
                <div class="file-info">
                    <h4><i class="fas fa-info-circle"></i> 文件格式说明</h4>
                    <p>系统支持JSON格式文件(.json)，文件应包含以下字段：</p>
                    <p>id: 序号 | name: 片名 | category: 分类 | year: 年份 | tags: 类型标签 | star: 主演 | image: 图片链接(可选)</p>
                    <p>JSON格式示例：<br>[{"id":1,"name":"影片名称","category":"电影","year":2020,"tags":["动作","冒险"],"star":"演员1、演员2","image":"url"}]</p>
                    <p>提示：Excel文件可通过在线转换工具转换为JSON格式</p>
                </div>
                
                <button class="export-btn" id="exportBtn">
                    <i class="fas fa-file-export"></i> 导出JSON数据
                    <div class="export-progress">
                        <div class="export-progress-bar"></div>
                    </div>
                </button>
                
                <button class="clear-btn" id="clearBtn">
                    <i class="fas fa-trash-alt"></i> 清空所有数据
                </button>
            </div>
            
            <div class="table-container fade-in delay-2">
                <div class="controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="搜索影片名称...">
                    </div>
                    
                    <div class="star-search">
                        <i class="fas fa-user"></i>
                        <input type="text" id="starSearch" placeholder="搜索主演...">
                    </div>
                    
                    <div class="filter-controls-container">
                        <div class="filter-row">
                            <span class="filter-label">分类筛选：</span>
                            <button class="filter-btn active" data-category="all">全部</button>
                            <button class="filter-btn" data-category="movie">电影</button>
                            <button class="filter-btn" data-category="tv">电视剧</button>
                            <button class="filter-btn" data-category="variety">综艺</button>
                        </div>
                        
                        <div class="filter-row year-filter-row">
                            <span class="filter-label">年份筛选：</span>
                            <input type="number" id="yearFilter" class="year-filter-input" placeholder="输入年份" min="1900" max="2100">
                            <button class="filter-btn" id="applyYearFilter">应用</button>
                            <button class="filter-btn" id="clearYearFilter">清除</button>
                        </div>
                        
                        <div class="filter-row">
                            <span class="filter-label">类型标签：</span>
                            <div class="tag-filters">
                                <button class="filter-btn tag-filter active" data-tag="all">全部</button>
                                <button class="filter-btn tag-filter" data-tag="动作">动作</button>
                                <button class="filter-btn tag-filter" data-tag="喜剧">喜剧</button>
                                <button class="filter-btn tag-filter" data-tag="爱情">爱情</button>
                                <button class="filter-btn tag-filter" data-tag="科幻">科幻</button>
                                <button class="filter-btn tag-filter" data-tag="恐怖">恐怖</button>
                                <button class="filter-btn tag-filter" data-tag="剧情">剧情</button>
                                <button class="filter-btn tag-filter" data-tag="战争">战争</button>
                                <button class="filter-btn tag-filter" data-tag="纪录片">纪录片</button>
                                <button class="filter-btn tag-filter" data-tag="动画">动画</button>
                                <button class="filter-btn tag-filter" data-tag="冒险">冒险</button>
                                <button class="filter-btn tag-filter" data-tag="悬疑">悬疑</button>
                                <button class="filter-btn tag-filter" data-tag="惊悚">惊悚</button>
                                <button class="filter-btn tag-filter" data-tag="灾难">灾难</button>
                                <button class="filter-btn tag-filter" data-tag="18+">18+</button>
                            </div>
                        </div>
                        
                        <button class="filter-btn" id="addBtn"><i class="fas fa-plus"></i> 添加数据</button>
                    </div>
                </div>
                
                <div id="editFormContainer" style="display: none;">
                    <div class="edit-form">
                        <div class="form-group">
                            <label for="editId">序号</label>
                            <input type="number" id="editId" placeholder="自动生成" disabled>
                        </div>
                        <div class="form-group">
                            <label for="editName">片名</label>
                            <input type="text" id="editName" placeholder="输入片名">
                        </div>
                        <div class="form-group">
                            <label for="editCategory">分类</label>
                            <select id="editCategory">
                                <option value="movie">电影</option>
                                <option value="tv">电视剧</option>
                                <option value="variety">综艺</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editYear">年份</label>
                            <input type="number" id="editYear" placeholder="输入年份" min="1900" max="2100">
                        </div>
                        <div class="form-group">
                            <label for="editStar">主演/主持人</label>
                            <input type="text" id="editStar" placeholder="输入主演/主持人，多个用、分隔">
                        </div>
                        <div class="form-group" id="tagsFormGroup">
                            <label>类型标签</label>
                            <div class="tags-container">
                                <input type="checkbox" id="tag-action" class="tag-checkbox" value="动作">
                                <label for="tag-action" class="tag-label type-action">动作</label>
                                
                                <input type="checkbox" id="tag-comedy" class="tag-checkbox" value="喜剧">
                                <label for="tag-comedy" class="tag-label type-comedy">喜剧</label>
                                
                                <input type="checkbox" id="tag-love" class="tag-checkbox" value="爱情">
                                <label for="tag-love" class="tag-label type-love">爱情</label>
                                
                                <input type="checkbox" id="tag-scifi" class="tag-checkbox" value="科幻">
                                <label for="tag-scifi" class="tag-label type-sci-fi">科幻</label>
                                
                                <input type="checkbox" id="tag-horror" class="tag-checkbox" value="恐怖">
                                <label for="tag-horror" class="tag-label type-horror">恐怖</label>
                                
                                <input type="checkbox" id="tag-drama" class="tag-checkbox" value="剧情">
                                <label for="tag-drama" class="tag-label type-drama">剧情</label>
                                
                                <input type="checkbox" id="tag-war" class="tag-checkbox" value="战争">
                                <label for="tag-war" class="tag-label type-war">战争</label>
                                
                                <input type="checkbox" id="tag-documentary" class="tag-checkbox" value="纪录片">
                                <label for="tag-documentary" class="tag-label type-documentary">纪录片</label>
                                
                                <input type="checkbox" id="tag-animation" class="tag-checkbox" value="动画">
                                <label for="tag-animation" class="tag-label type-animation">动画</label>
                                
                                <input type="checkbox" id="tag-adventure" class="tag-checkbox" value="冒险">
                                <label for="tag-adventure" class="tag-label type-adventure">冒险</label>
                                
                                <input type="checkbox" id="tag-suspense" class="tag-checkbox" value="悬疑">
                                <label for="tag-suspense" class="tag-label type-suspense">悬疑</label>
                                
                                <input type="checkbox" id="tag-thriller" class="tag-checkbox" value="惊悚">
                                <label for="tag-thriller" class="tag-label type-thriller">惊悚</label>
                                
                                <input type="checkbox" id="tag-disaster" class="tag-checkbox" value="灾难">
                                <label for="tag-disaster" class="tag-label type-disaster">灾难</label>
                                
                                <input type="checkbox" id="tag-18plus" class="tag-checkbox" value="18+">
                                <label for="tag-18plus" class="tag-label type-18plus">18+</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editImage">图片链接</label>
                            <input type="text" id="editImage" placeholder="输入图片URL或上传图片">
                            
                            <div class="image-upload-container">
                                <label>上传本地图片：</label>
                                <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                                <button class="image-upload-btn" onclick="document.getElementById('imageUpload').click()">
                                    <i class="fas fa-upload"></i> 选择图片
                                </button>
                                <div class="upload-status" id="uploadStatus"></div>
                                
                                <div class="image-preview" id="imagePreview">
                                    <img id="previewImg" src="" alt="图片预览">
                                    <div>
                                        <button class="remove-image-btn" id="removeImageBtn">
                                            <i class="fas fa-times"></i> 移除图片
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn save-btn" id="saveBtn"><i class="fas fa-save"></i> 保存</button>
                            <button class="action-btn cancel-btn" id="cancelBtn"><i class="fas fa-times"></i> 取消</button>
                        </div>
                    </div>
                </div>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>片名</th>
                            <th>分类</th>
                            <th>年份</th>
                            <th>类型标签</th>
                            <th>主演/主持人</th>
                            <th>图片</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- 数据将通过JavaScript动态填充 -->
                    </tbody>
                </table>
                
                <div class="pagination" id="pagination">
                    <!-- 分页按钮将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
        
        <div class="detail-section fade-in delay-3">
            <div class="detail-header">
                <div class="detail-img">
                    <i class="fas fa-image"></i>
                    <span>影片封面</span>
                </div>
                <div class="detail-info">
                    <h2>选择影片查看详情</h2>
                    <p>分类: <span>--</span></p>
                    <p>年份: <span>--</span></p>
                    <p>类型标签: <span>--</span></p>
                    <p>主演/主持人: <span>--</span></p>
                    <p>序号: <span>--</span></p>
                </div>
            </div>
            <div class="detail-content">
                <p>在左侧表格中选择一个影片项目，详细信息将显示在此处。</p>
            </div>
        </div>
        
        <div class="stats fade-in delay-4">
            <div class="stat-item">
                <div class="stat-value" id="totalCount">0</div>
                <div class="stat-label">影片总数</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="movieCount">0</div>
                <div class="stat-label">电影数量</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="tvCount">0</div>
                <div class="stat-label">电视剧数量</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="varietyCount">0</div>
                <div class="stat-label">综艺数量</div>
            </div>
        </div>
        
        <footer class="fade-in delay-5">
            <p>© 2025 影视电影资料管理系统 | 设计：前端工程师 | 数据仅用于展示</p>
        </footer>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> 操作成功！
    </div>

    <div class="confirmation-dialog" id="confirmationDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3><i class="fas fa-exclamation-triangle"></i> 确认操作</h3>
            </div>
            <div class="dialog-body" id="dialogMessage">
                <!-- 消息内容将通过JavaScript填充 -->
            </div>
            <div class="dialog-footer">
                <button class="dialog-btn dialog-cancel" id="dialogCancel">取消</button>
                <button class="dialog-btn dialog-confirm" id="dialogConfirm">确认</button>
            </div>
        </div>
    </div>

    <script>
        // 初始化空数据
        let allData = [];
        
        let currentPage = 1;
        const rowsPerPage = 10;
        let currentCategoryFilter = "all";
        let currentTagFilter = "all";
        let currentYearFilter = null;
        let currentSearch = "";
        let currentStarSearch = "";
        let selectedRow = null;
        let editingId = null;
        let importedFileName = "";
        
        // 定义类型标签
        const tagTypes = {
            "18+": "type-18plus",
            "爱情": "type-love",
            "动作": "type-action",
            "喜剧": "type-comedy",
            "剧情": "type-drama",
            "科幻": "type-sci-fi",
            "恐怖": "type-horror",
            "奇幻": "type-fantasy",
            "战争": "type-war",
            "纪录片": "type-documentary",
            "动画": "type-animation",
            "冒险": "type-adventure",
            "悬疑": "type-suspense",
            "惊悚": "type-thriller",
            "灾难": "type-disaster"
        };
        
        // DOM元素
        const tableBody = document.getElementById('tableBody');
        const pagination = document.getElementById('pagination');
        const searchInput = document.getElementById('searchInput');
        const starSearch = document.getElementById('starSearch');
        const categoryButtons = document.querySelectorAll('.filter-btn[data-category]');
        const tagButtons = document.querySelectorAll('.tag-filter');
        const yearFilterInput = document.getElementById('yearFilter');
        const applyYearFilterBtn = document.getElementById('applyYearFilter');
        const clearYearFilterBtn = document.getElementById('clearYearFilter');
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const dropArea = document.getElementById('dropArea');
        const totalCount = document.getElementById('totalCount');
        const movieCount = document.getElementById('movieCount');
        const tvCount = document.getElementById('tvCount');
        const varietyCount = document.getElementById('varietyCount');
        const notification = document.getElementById('notification');
        const addBtn = document.getElementById('addBtn');
        const editFormContainer = document.getElementById('editFormContainer');
        const editId = document.getElementById('editId');
        const editName = document.getElementById('editName');
        const editCategory = document.getElementById('editCategory');
        const editYear = document.getElementById('editYear');
        const editStar = document.getElementById('editStar');
        const editImage = document.getElementById('editImage');
        const saveBtn = document.getElementById('saveBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const exportBtn = document.getElementById('exportBtn');
        const clearBtn = document.getElementById('clearBtn');
        const confirmationDialog = document.getElementById('confirmationDialog');
        const dialogMessage = document.getElementById('dialogMessage');
        const dialogCancel = document.getElementById('dialogCancel');
        const dialogConfirm = document.getElementById('dialogConfirm');
        const exportProgressBar = document.querySelector('.export-progress-bar');
        const themeToggle = document.getElementById('themeToggle');
        const tagsFormGroup = document.getElementById('tagsFormGroup');
        
        // 图片上传相关元素
        const imageUpload = document.getElementById('imageUpload');
        const imagePreview = document.getElementById('imagePreview');
        const previewImg = document.getElementById('previewImg');
        const removeImageBtn = document.getElementById('removeImageBtn');
        const uploadStatus = document.getElementById('uploadStatus');
        
        // 移动端元素
        const mobileSidebar = document.getElementById('mobileSidebar');
        const closeSidebar = document.getElementById('closeSidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const mobileSearchInput = document.getElementById('mobileSearchInput');
        const mobileStarSearch = document.getElementById('mobileStarSearch');
        const mobileFilterButtons = document.querySelectorAll('.sidebar-filter-btn');
        const mobileAddBtn = document.getElementById('mobileAddBtn');
        const mobileThemeBtn = document.getElementById('mobileThemeBtn');
        const mobileUploadBtn = document.getElementById('mobileUploadBtn');
        const mobileExportBtn = document.getElementById('mobileExportBtn');
        const mobileClearBtn = document.getElementById('mobileClearBtn');
        const mobileFileInput = document.getElementById('mobileFileInput');
        const mobileNavBtns = document.querySelectorAll('.mobile-nav-btn');
        const mobileYearFilter = document.getElementById('mobileYearFilter');
        const mobileApplyYearFilter = document.getElementById('mobileApplyYearFilter');
        
        // 下载提示元素
        const downloadNotification = document.getElementById('downloadNotification');
        const closeDownloadNotification = document.getElementById('closeDownloadNotification');
        
        // 显示下载提示
        function showDownloadNotification() {
            downloadNotification.classList.add('show');
            
            setTimeout(() => {
                downloadNotification.classList.remove('show');
            }, 5000);
        }
        
        // 关闭下载提示
        function closeDownloadNotificationHandler() {
            downloadNotification.classList.remove('show');
        }
        
        // 图片上传功能
        imageUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showNotification('请选择图像文件', false);
                return;
            }
            
            if (file.size > 2 * 1024 * 1024) {
                showNotification('图像大小不能超过2MB', false);
                return;
            }
            
            uploadStatus.textContent = '正在处理图像...';
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                previewImg.src = base64;
                imagePreview.style.display = 'block';
                editImage.value = base64;
                uploadStatus.textContent = '图像上传成功！';
                
                setTimeout(() => {
                    uploadStatus.textContent = '';
                }, 3000);
            };
            
            reader.onerror = function() {
                uploadStatus.textContent = '图像处理失败';
                showNotification('图像处理失败，请重试', false);
            };
            
            reader.readAsDataURL(file);
        });
        
        // 移除图片功能
        removeImageBtn.addEventListener('click', function() {
            previewImg.src = '';
            imagePreview.style.display = 'none';
            editImage.value = '';
            imageUpload.value = '';
            uploadStatus.textContent = '图像已移除';
            
            setTimeout(() => {
                uploadStatus.textContent = '';
            }, 3000);
        });
        
        // 初始化表格
        function renderTable() {
            // 应用筛选和搜索
            let filteredData = allData;
            
            // 分类筛选
            if (currentCategoryFilter !== "all") {
                filteredData = filteredData.filter(item => item.category === currentCategoryFilter);
            }
            
            // 标签筛选
            if (currentTagFilter !== "all") {
                filteredData = filteredData.filter(item => 
                    item.tags && item.tags.includes(currentTagFilter)
                );
            }
            
            // 年份筛选
            if (currentYearFilter !== null) {
                filteredData = filteredData.filter(item => item.year == currentYearFilter);
            }
            
            // 片名搜索筛选
            if (currentSearch) {
                const searchTerm = currentSearch.toLowerCase();
                filteredData = filteredData.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) || 
                    String(item.id).includes(searchTerm)
                );
            }
            
            // 主演搜索筛选
            if (currentStarSearch) {
                const starTerm = currentStarSearch.toLowerCase();
                filteredData = filteredData.filter(item => 
                    item.star.toLowerCase().includes(starTerm)
                );
            }
            
            // 更新统计信息
            updateStats(filteredData);
            
            // 分页
            const totalPages = Math.ceil(filteredData.length / rowsPerPage);
            const startIndex = (currentPage - 1) * rowsPerPage;
            const endIndex = Math.min(startIndex + rowsPerPage, filteredData.length);
            const pageData = filteredData.slice(startIndex, endIndex);
            
            // 清空表格
            tableBody.innerHTML = '';
            
            // 如果数据为空，显示空状态
            if (pageData.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = `
                    <td colspan="8">
                        <div class="empty-state">
                            <i class="fas fa-database"></i>
                            <h3>数据库为空</h3>
                            <p>请上传JSON文件添加数据，或点击"添加数据"按钮</p>
                        </div>
                    </td>
                `;
                tableBody.appendChild(emptyRow);
                
                // 清空分页
                pagination.innerHTML = '';
                
                // 清空详情
                showDetails(null);
                return;
            }
            
            // 填充表格
            pageData.forEach(item => {
                const row = document.createElement('tr');
                
                // 分类标签
                let categoryClass = "category-other";
                let categoryText = "其他";
                
                if (item.category === "movie") {
                    categoryClass = "category-movie";
                    categoryText = "电影";
                } else if (item.category === "tv") {
                    categoryClass = "category-tv";
                    categoryText = "电视剧";
                } else if (item.category === "variety") {
                    categoryClass = "category-variety";
                    categoryText = "综艺";
                }
                
                // 生成标签HTML
                let tagsHTML = '';
                if (item.tags && item.tags.length > 0) {
                    item.tags.forEach(tag => {
                        const tagClass = tagTypes[tag] || "type-other";
                        tagsHTML += `<span class="type-tag ${tagClass}">${tag}</span>`;
                    });
                } else {
                    tagsHTML = '<span class="type-tag type-other">无标签</span>';
                }
                
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td><span class="category-tag ${categoryClass}">${categoryText}</span></td>
                    <td>${item.year || '--'}</td>
                    <td>${tagsHTML}</td>
                    <td>${item.star}</td>
                    <td>
                        <div class="thumbnail">
                            ${item.image ? 
                                `<img src="${item.image}" alt="${item.name}">` : 
                                `<i class="fas fa-image"></i><span>无图片</span>`}
                        </div>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="edit-btn" data-id="${item.id}"><i class="fas fa-edit"></i></button>
                            <button class="delete-btn" data-id="${item.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                    <div class="selected-indicator"></div>
                `;
                
                // 添加点击事件显示详情
                row.addEventListener('click', (e) => {
                    if(e.target.closest('.edit-btn') || e.target.closest('.delete-btn')) return;
                    
                    // 移除之前选中的行
                    if (selectedRow) {
                        selectedRow.classList.remove('selected-row');
                    }
                    
                    // 设置当前行为选中状态
                    row.classList.add('selected-row');
                    selectedRow = row;
                    
                    // 显示详情
                    showDetails(item);
                });
                
                // 编辑按钮事件
                row.querySelector('.edit-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    const id = e.target.closest('.edit-btn').dataset.id;
                    const item = allData.find(i => i.id == id);
                    openEditForm(item);
                });
                
                // 删除按钮事件
                row.querySelector('.delete-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    const id = e.target.closest('.delete-btn').dataset.id;
                    showConfirmation(`确定要删除影片 "${item.name}" 吗？`, () => {
                        deleteItem(id);
                    });
                });
                
                tableBody.appendChild(row);
            });
            
            // 渲染分页
            renderPagination(totalPages);
        }
        
        // 渲染分页控件（增强版）
        function renderPagination(totalPages) {
            pagination.innerHTML = '';
            
            if (totalPages === 0) {
                return;
            }
            
            // 最前按钮
            const firstBtn = document.createElement('div');
            firstBtn.className = 'page-btn';
            firstBtn.innerHTML = '<i class="fas fa-step-backward"></i>';
            firstBtn.title = '第一页';
            firstBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage = 1;
                    renderTable();
                }
            });
            pagination.appendChild(firstBtn);
            
            // 上一页按钮
            const prevBtn = document.createElement('div');
            prevBtn.className = 'page-btn';
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevBtn.title = '上一页';
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable();
                }
            });
            pagination.appendChild(prevBtn);
            
            // 页码文本
            const pageText = document.createElement('div');
            pageText.className = 'page-text';
            pageText.textContent = `第 ${currentPage} / ${totalPages} 页`;
            pagination.appendChild(pageText);
            
            // 页码输入框
            const pageInput = document.createElement('input');
            pageInput.type = 'number';
            pageInput.className = 'page-input';
            pageInput.min = 1;
            pageInput.max = totalPages;
            pageInput.value = currentPage;
            pageInput.title = '输入页码跳转';
            pageInput.addEventListener('change', () => {
                let pageNum = parseInt(pageInput.value);
                if (pageNum < 1) pageNum = 1;
                if (pageNum > totalPages) pageNum = totalPages;
                
                if (pageNum !== currentPage) {
                    currentPage = pageNum;
                    renderTable();
                }
            });
            pagination.appendChild(pageInput);
            
            // 跳转按钮
            const goBtn = document.createElement('div');
            goBtn.className = 'page-btn';
            goBtn.textContent = '跳转';
            goBtn.title = '跳转到指定页码';
            goBtn.addEventListener('click', () => {
                let pageNum = parseInt(pageInput.value);
                if (pageNum < 1) pageNum = 1;
                if (pageNum > totalPages) pageNum = totalPages;
                
                if (pageNum !== currentPage) {
                    currentPage = pageNum;
                    renderTable();
                }
            });
            pagination.appendChild(goBtn);
            
            // 下一页按钮
            const nextBtn = document.createElement('div');
            nextBtn.className = 'page-btn';
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextBtn.title = '下一页';
            nextBtn.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTable();
                }
            });
            pagination.appendChild(nextBtn);
            
            // 最后按钮
            const lastBtn = document.createElement('div');
            lastBtn.className = 'page-btn';
            lastBtn.innerHTML = '<i class="fas fa-step-forward"></i>';
            lastBtn.title = '最后一页';
            lastBtn.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage = totalPages;
                    renderTable();
                }
            });
            pagination.appendChild(lastBtn);
        }
        
        // 显示详情
        function showDetails(item) {
            const detailImg = document.querySelector('.detail-img');
            const detailInfo = document.querySelector('.detail-info');
            const detailContent = document.querySelector('.detail-content');
            
            if (!item) {
                detailImg.innerHTML = `<i class="fas fa-image"></i><span>影片封面</span>`;
                detailInfo.innerHTML = `
                    <h2>选择影片查看详情</h2>
                    <p>分类: <span>--</span></p>
                    <p>年份: <span>--</span></p>
                    <p>类型标签: <span>--</span></p>
                    <p>主演/主持人: <span>--</span></p>
                    <p>序号: <span>--</span></p>
                `;
                detailContent.innerHTML = `<p>在左侧表格中选择一个影片项目，详细信息将显示在此处。</p>`;
                return;
            }
            
            // 更新图片
            if (item.image) {
                detailImg.innerHTML = `<img src="${item.image}" alt="${item.name}">`;
            } else {
                detailImg.innerHTML = `<i class="fas fa-image"></i><span>影片封面</span>`;
            }
            
            // 生成标签HTML
            let tagsHTML = '';
            if (item.tags && item.tags.length > 0) {
                item.tags.forEach(tag => {
                    const tagClass = tagTypes[tag] || "type-other";
                    tagsHTML += `<span class="type-tag ${tagClass}">${tag}</span>`;
                });
            } else {
                tagsHTML = '<span>无标签</span>';
            }
            
            // 分类文本
            let categoryText = "其他";
            if (item.category === "movie") {
                categoryText = "电影";
            } else if (item.category === "tv") {
                categoryText = "电视剧";
            } else if (item.category === "variety") {
                categoryText = "综艺";
            }
            
            // 更新信息
            detailInfo.innerHTML = `
                <h2>${item.name}</h2>
                <p>分类: <span>${categoryText}</span></p>
                <p>年份: <span>${item.year || '--'}</span></p>
                <p>类型标签: <span>${tagsHTML}</span></p>
                <p>主演/主持人: <span>${item.star}</span></p>
                <p>序号: <span>${item.id}</span></p>
            `;
            
            // 更新内容
            detailContent.innerHTML = `
                <p>${item.name} 是一部${categoryText}作品，于${item.year || '未知年份'}上映。</p>
                <p>主演/主持人包括：<strong>${item.star}</strong>。</p>
                ${item.tags && item.tags.length > 0 ? `<p>该作品类型标签为：${tagsHTML}。</p>` : ''}
                <p>该作品已被收录在影视资料库中，编号为${item.id}。</p>
            `;
        }
        
        // 更新统计信息
        function updateStats(data) {
            totalCount.textContent = allData.length;
            
            const movie = allData.filter(item => item.category === "movie").length;
            const tv = allData.filter(item => item.category === "tv").length;
            const variety = allData.filter(item => item.category === "variety").length;
            
            movieCount.textContent = movie;
            tvCount.textContent = tv;
            varietyCount.textContent = variety;
        }
        
        // 显示通知
        function showNotification(message, isSuccess = true) {
            notification.innerHTML = `<i class="fas ${isSuccess ? 'fa-check-circle' : 'fa-exclamation-triangle'}"></i> ${message}`;
            notification.style.background = isSuccess ? 'rgba(46, 204, 113, 0.9)' : 'rgba(231, 76, 60, 0.9)';
            notification.className = isSuccess ? 'notification show' : 'notification show error';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // 打开编辑表单
        function openEditForm(item = null) {
            editFormContainer.style.display = 'block';
            
            // 清空所有标签选择
            document.querySelectorAll('.tag-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            if (item) {
                // 编辑现有项目
                editingId = item.id;
                editId.value = item.id;
                editName.value = item.name;
                editCategory.value = item.category || 'movie';
                editYear.value = item.year || '';
                editStar.value = item.star;
                editImage.value = item.image || '';
                
                // 设置图片预览
                if (item.image) {
                    previewImg.src = item.image;
                    imagePreview.style.display = 'block';
                } else {
                    imagePreview.style.display = 'none';
                }
                
                // 设置标签选择
                if (item.tags && item.tags.length > 0) {
                    item.tags.forEach(tag => {
                        const checkbox = document.querySelector(`.tag-checkbox[value="${tag}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    });
                }
            } else {
                // 添加新项目
                editingId = null;
                const maxId = allData.length > 0 ? Math.max(...allData.map(i => i.id)) : 0;
                editId.value = maxId + 1;
                editName.value = '';
                editCategory.value = 'movie';
                editYear.value = '';
                editStar.value = '';
                editImage.value = '';
                
                // 重置图片预览
                previewImg.src = '';
                imagePreview.style.display = 'none';
                imageUpload.value = '';
            }
            
            // 根据分类显示/隐藏标签选择
            toggleTagsVisibility(editCategory.value);
            
            // 滚动到表单位置
            document.querySelector('.table-container').scrollTop = 0;
            
            // 移动端关闭侧边栏
            closeMobileSidebar();
        }
        
        // 根据分类切换标签显示的可见性
        function toggleTagsVisibility(category) {
            if (category === 'variety') {
                tagsFormGroup.style.display = 'none';
            } else {
                tagsFormGroup.style.display = 'flex';
            }
        }
        
        // 保存表单数据
        function saveForm() {
            const id = parseInt(editId.value);
            const name = editName.value.trim();
            const category = editCategory.value;
            const year = editYear.value ? parseInt(editYear.value) : null;
            const star = editStar.value.trim();
            const image = editImage.value.trim();
            
            // 获取选中的标签（如果是综艺，则标签为空数组）
            const selectedTags = [];
            if (category !== 'variety') {
                document.querySelectorAll('.tag-checkbox:checked').forEach(checkbox => {
                    selectedTags.push(checkbox.value);
                });
            }
            
            if (!name) {
                showNotification("片名不能为空！", false);
                return;
            }
            
            if (!star) {
                showNotification("主演/主持人不能为空！", false);
                return;
            }
            
            // 保存当前页码
            const prevPage = currentPage;
            
            if (editingId !== null) {
                // 更新现有项目
                const index = allData.findIndex(item => item.id === editingId);
                if (index !== -1) {
                    allData[index] = { id, name, category, year, tags: selectedTags, star, image };
                }
                showNotification("影片信息更新成功！");
            } else {
                // 添加新项目
                // 检查ID是否已存在
                if (allData.some(item => item.id === id)) {
                    showNotification("序号已存在，请使用不同的序号", false);
                    return;
                }
                
                allData.push({ id, name, category, year, tags: selectedTags, star, image });
                showNotification("影片添加成功！");
            }
            
            // 关闭表单
            editFormContainer.style.display = 'none';
            
            // 恢复之前的页码
            currentPage = prevPage;
            renderTable();
        }
        
        // 删除项目并重新排序
        function deleteItem(id) {
            // 删除项目
            allData = allData.filter(item => item.id != id);
            
            // 重新排序所有剩余项目的序号
            reorderIds();
            
            showNotification("影片删除成功！");
            currentPage = 1;
            renderTable();
        }
        
        // 重新排序所有项目的ID
        function reorderIds() {
            // 按原始顺序重新分配ID，从1开始
            allData.forEach((item, index) => {
                item.id = index + 1;
            });
        }
        
        // 导出为JSON文件
        function exportToJson() {
            if (allData.length === 0) {
                showNotification("没有数据可导出", false);
                return;
            }
            
            try {
                // 显示导出进度
                exportBtn.classList.add('exporting');
                exportProgressBar.style.width = '0%';
                
                // 模拟导出进度
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    exportProgressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        // 导出文件
                        const jsonData = JSON.stringify(allData, null, 2);
                        const blob = new Blob([jsonData], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        
                        const a = document.createElement('a');
                        a.href = url;
                        
                        // 使用导入的文件名（如果存在），否则使用默认文件名
                        let fileName = 'film_data';
                        if (importedFileName) {
                            fileName = importedFileName.replace('.json', '') + '_export';
                        } else {
                            fileName = `film_data_${new Date().toISOString().slice(0, 10)}`;
                        }
                        
                        a.download = `${fileName}.json`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        
                        showNotification("数据导出成功！");
                        
                        // 显示下载提示
                        showDownloadNotification();
                        
                        // 重置导出按钮
                        setTimeout(() => {
                            exportBtn.classList.remove('exporting');
                        }, 500);
                    }
                }, 50);
            } catch (error) {
                showNotification(`导出失败: ${error.message}`, false);
                exportBtn.classList.remove('exporting');
            }
        }
        
        // 清空数据
        function clearAllData() {
            allData = [];
            importedFileName = "";
            currentPage = 1;
            selectedRow = null;
            showDetails(null);
            renderTable();
            showNotification("所有数据已清空！");
        }
        
        // 显示确认对话框
        function showConfirmation(message, confirmCallback) {
            dialogMessage.innerHTML = message;
            confirmationDialog.classList.add('show');
            
            const confirmHandler = () => {
                confirmationDialog.classList.remove('show');
                confirmCallback();
                dialogConfirm.removeEventListener('click', confirmHandler);
            };
            
            const cancelHandler = () => {
                confirmationDialog.classList.remove('show');
                dialogCancel.removeEventListener('click', cancelHandler);
            };
            
            dialogConfirm.addEventListener('click', confirmHandler);
            dialogCancel.addEventListener('click', cancelHandler);
        }
        
        // 处理文件上传
        function handleFileUpload(file) {
            if (file.type === "application/json" || file.name.endsWith('.json')) {
                // 显示加载状态
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="8">
                            <div class="loader">
                                <div class="loader-spinner"></div>
                            </div>
                        </td>
                    </tr>
                `;
                
                // 存储文件名（不含扩展名）
                importedFileName = file.name;
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const jsonData = JSON.parse(e.target.result);
                        if (Array.isArray(jsonData)) {
                            allData = jsonData;
                            showNotification("JSON文件导入成功！");
                            currentPage = 1;
                            renderTable();
                        } else {
                            showNotification("JSON格式错误：应为数组", false);
                            renderTable();
                        }
                    } catch (error) {
                        showNotification("JSON解析错误：" + error.message, false);
                        renderTable();
                    }
                };
                
                reader.onerror = function() {
                    showNotification("文件读取失败", false);
                    renderTable();
                };
                
                reader.readAsText(file);
            } else {
                showNotification("请上传JSON格式文件", false);
            }
            
            // 移动端关闭侧边栏
            closeMobileSidebar();
        }
        
        // ========== 移动端功能 ==========
        
        // 切换移动端侧边栏
        function toggleMobileSidebar() {
            mobileSidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('show');
        }
        
        // 关闭移动端侧边栏
        function closeMobileSidebar() {
            mobileSidebar.classList.remove('open');
            sidebarOverlay.classList.remove('show');
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 添加一些示例数据
            allData = [
                {
                    id: 1,
                    name: "星际穿越",
                    category: "movie",
                    year: 2014,
                    tags: ["科幻", "剧情"],
                    star: "马修·麦康纳、安妮·海瑟薇",
                    image: "https://example.com/image1.jpg"
                },
                {
                    id: 2,
                    name: "权力的游戏",
                    category: "tv",
                    year: 2011,
                    tags: ["奇幻", "剧情", "18+"],
                    star: "基特·哈灵顿、艾米莉亚·克拉克",
                    image: "https://example.com/image2.jpg"
                },
                {
                    id: 3,
                    name: "泰坦尼克号",
                    category: "movie",
                    year: 1997,
                    tags: ["爱情", "剧情"],
                    star: "莱昂纳多·迪卡普里奥、凯特·温丝莱特",
                    image: "https://example.com/image3.jpg"
                },
                {
                    id: 4,
                    name: "奔跑吧兄弟",
                    category: "variety",
                    year: 2014,
                    tags: [],
                    star: "邓超、李晨、陈赫、郑恺",
                    image: "https://example.com/image4.jpg"
                }
            ];
            
            renderTable();
            updateStats(allData);
            
            // 添加一些动画延迟效果
            document.querySelectorAll('.fade-in').forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            // 检查本地存储的主题设置
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                localStorage.setItem('theme', 'dark');
            }
            
            // 绑定下载提示关闭事件
            closeDownloadNotification.addEventListener('click', closeDownloadNotificationHandler);
        });
        
        // ========== 移动端事件绑定 ==========
        
        // 打开/关闭移动端侧边栏
        closeSidebar.addEventListener('click', closeMobileSidebar);
        sidebarOverlay.addEventListener('click', closeMobileSidebar);
        
        // 移动端搜索
        mobileSearchInput.addEventListener('input', () => {
            currentSearch = mobileSearchInput.value;
            currentPage = 1;
            renderTable();
        });
        
        mobileStarSearch.addEventListener('input', () => {
            currentStarSearch = mobileStarSearch.value;
            currentPage = 1;
            renderTable();
        });
        
        // 移动端筛选
        mobileFilterButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (button.dataset.category) {
                    // 分类筛选
                    document.querySelectorAll('.sidebar-filter-btn[data-category]').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    button.classList.add('active');
                    currentCategoryFilter = button.dataset.category;
                } else if (button.dataset.tag) {
                    // 标签筛选
                    document.querySelectorAll('.sidebar-filter-btn.tag-filter').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    button.classList.add('active');
                    currentTagFilter = button.dataset.tag;
                }
                
                currentPage = 1;
                renderTable();
            });
        });
        
        // 移动端年份筛选
        mobileApplyYearFilter.addEventListener('click', () => {
            const year = mobileYearFilter.value ? parseInt(mobileYearFilter.value) : null;
            
            if (year && (year < 1900 || year > 2100)) {
                showNotification("请输入有效的年份（1900-2100）", false);
                return;
            }
            
            currentYearFilter = year;
            currentPage = 1;
            renderTable();
        });
        
        // 移动端添加数据
        mobileAddBtn.addEventListener('click', () => {
            openEditForm();
        });
        
        // 移动端主题切换
        mobileThemeBtn.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            const isLightTheme = document.body.classList.contains('light-theme');
            
            if (isLightTheme) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
                localStorage.setItem('theme', 'light');
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                localStorage.setItem('theme', 'dark');
            }
            
            closeMobileSidebar();
        });
        
        // 移动端上传文件
        mobileUploadBtn.addEventListener('click', () => {
            mobileFileInput.click();
        });
        
        mobileFileInput.addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                handleFileUpload(e.target.files[0]);
            }
        });
        
        // 移动端导出数据
        mobileExportBtn.addEventListener('click', exportToJson);
        
        // 移动端清空数据
        mobileClearBtn.addEventListener('click', () => {
            showConfirmation("确定要清空所有数据吗？此操作不可撤销！", clearAllData);
        });
        
        // 移动端底部导航
        mobileNavBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // 更新导航按钮状态
                mobileNavBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const navAction = btn.dataset.nav;
                
                // 根据导航项执行不同操作
                switch(navAction) {
                    case 'home':
                        // 滚动到顶部
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        break;
                    case 'list':
                        // 滚动到表格区域
                        document.querySelector('.table-container').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case 'details':
                        // 滚动到详情区域
                        document.querySelector('.detail-section').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case 'sidebar':
                        // 打开侧边栏
                        toggleMobileSidebar();
                        break;
                }
            });
        });
        
        // ========== 电脑端功能 ==========
        
        // 文件上传处理
        uploadBtn.addEventListener('click', () => {
            fileInput.click();
        });
        
        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                handleFileUpload(this.files[0]);
            }
        });
        
        // 拖放功能
        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropArea.style.borderColor = '#4361ee';
            dropArea.style.backgroundColor = 'rgba(26, 32, 44, 0.7)';
        });
        
        dropArea.addEventListener('dragleave', () => {
            dropArea.style.borderColor = '#4cc9f0';
            dropArea.style.backgroundColor = 'rgba(26, 32, 44, 0.5)';
        });
        
        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dropArea.style.borderColor = '#4cc9f0';
            dropArea.style.backgroundColor = 'rgba(26, 32, 44, 0.5)';
            
            if (e.dataTransfer.files.length) {
                handleFileUpload(e.dataTransfer.files[0]);
            }
        });
        
        // 片名搜索功能
        searchInput.addEventListener('input', () => {
            currentSearch = searchInput.value;
            currentPage = 1;
            renderTable();
        });
        
        // 主演搜索功能
        starSearch.addEventListener('input', () => {
            currentStarSearch = starSearch.value;
            currentPage = 1;
            renderTable();
        });
        
        // 分类筛选功能
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                categoryButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                currentCategoryFilter = button.dataset.category;
                currentPage = 1;
                renderTable();
            });
        });
        
        // 标签筛选功能
        tagButtons.forEach(button => {
            button.addEventListener('click', () => {
                tagButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                currentTagFilter = button.dataset.tag;
                currentPage = 1;
                renderTable();
            });
        });
        
        // 年份筛选功能
        applyYearFilterBtn.addEventListener('click', () => {
            const year = yearFilterInput.value ? parseInt(yearFilterInput.value) : null;
            
            if (year && (year < 1900 || year > 2100)) {
                showNotification("请输入有效的年份（1900-2100）", false);
                return;
            }
            
            currentYearFilter = year;
            currentPage = 1;
            renderTable();
        });
        
        // 清除年份筛选
        clearYearFilterBtn.addEventListener('click', () => {
            yearFilterInput.value = '';
            currentYearFilter = null;
            currentPage = 1;
            renderTable();
        });
        
        // 添加数据按钮
        addBtn.addEventListener('click', () => {
            openEditForm();
        });
        
        // 保存按钮
        saveBtn.addEventListener('click', saveForm);
        
        // 取消按钮
        cancelBtn.addEventListener('click', () => {
            editFormContainer.style.display = 'none';
        });
        
        // 导出按钮
        exportBtn.addEventListener('click', exportToJson);
        
        // 清空数据按钮
        clearBtn.addEventListener('click', () => {
            showConfirmation("确定要清空所有数据吗？此操作不可撤销！", clearAllData);
        });
        
        // 主题切换功能
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            const isLightTheme = document.body.classList.contains('light-theme');
            
            if (isLightTheme) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-sun"></i> 切换主题';
                localStorage.setItem('theme', 'light');
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                mobileThemeBtn.innerHTML = '<i class="fas fa-moon"></i> 切换主题';
                localStorage.setItem('theme', 'dark');
            }
        });
        
        // 分类选择变化时的事件
        editCategory.addEventListener('change', () => {
            toggleTagsVisibility(editCategory.value);
        });
    </script>
</body>
</html>